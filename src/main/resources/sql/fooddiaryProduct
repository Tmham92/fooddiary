DROP TABLE IF EXISTS product_nutrient;
DROP TABLE IF EXISTS product;
DROP TABLE IF EXISTS nutrient;

CREATE TABLE IF NOT EXISTS product
(
    id                     int(10) PRIMARY KEY AUTO_INCREMENT NOT NULL,
    code                   int(10)                            NOT NULL UNIQUE,
    group_code             int(5)                             NOT NULL,
    group_code_description varchar(255)                       NOT NULL,
    description_dutch      varchar(255)                       NOT NULL UNIQUE,
    description_english    varchar(255)                       NOT NULL UNIQUE,
    synonymous             varchar(255)                       NULL,
    measurement_unit       varchar(10)                        NOT NULL,
    measurement_quantity   int(5)                             NOT NULL,
    measurement_comment    varchar(255)                       NULL,
    enriched_with          varchar(255)                       NULL,
    traces_of              varchar(255)                       NULL
);

CREATE TABLE IF NOT EXISTS nutrient
(
    id               int(5) PRIMARY KEY AUTO_INCREMENT NOT NULL,
    code             varchar(25)                       NOT NULL UNIQUE,
    name_dutch       varchar(50)                       NOT NULL UNIQUE,
    name_english     varchar(50)                       NOT NULL UNIQUE,
    measurement_unit varchar(10)                       NOT NULL
);

CREATE TABLE IF NOT EXISTS product_nutrient
(
    id          int(5) PRIMARY KEY AUTO_INCREMENT NOT NULL,
    product_id  int(10),
    nutrient_id int(5),
    value       int(5),

    FOREIGN KEY (product_id) REFERENCES product (id),
    FOREIGN KEY (nutrient_id) REFERENCES nutrient (id)
);